<!DOCTYPE html>
<html>
  <head>
    <title>xheoTotals 2.0</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- JQuery -->
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>

	<!-- Data -->
	<script src="football2.js"></script>
	<script src="charts.js"></script>

    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" rel="stylesheet">
    <script src="js/bootstrap.min.js"></script>

    <!-- DataTables -->
    <link href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>

    <!-- Fixed Columns -->
    <link href="https://cdn.datatables.net/fixedcolumns/3.2.4/css/fixedColumns.dataTables.min.css" rel="stylesheet">
    <script src="https://cdn.datatables.net/fixedcolumns/3.2.4/js/dataTables.fixedColumns.min.js"></script>

    <!-- Responsive -->    
    <!--link href="https://cdn.datatables.net/responsive/2.2.1/css/responsive.dataTables.min.css" rel="stylesheet"-->
    <!--script src="https://cdn.datatables.net/responsive/2.2.1/js/dataTables.responsive.min.js"></script-->

    <!-- Select -->
    <link href="https://cdn.datatables.net/select/1.2.5/css/select.dataTables.min.css" rel="stylesheet">    
    <script src="https://cdn.datatables.net/select/1.2.5/js/dataTables.select.min.js"></script>	

    <!-- DataTables Bootstrap -->
    <!--link href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap.min.css" rel="stylesheet"-->  
    <!--script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.min.js"></script-->	  
    
    <!-- Moment JS -->
    <!--script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.3/moment.min.js"></script-->
    	
	<!-- Buttons -->
	<link href="https://cdn.datatables.net/buttons/1.5.1/css/buttons.dataTables.min.css" rel="stylesheet">	
	<script src="https://cdn.datatables.net/buttons/1.5.1/js/dataTables.buttons.min.js"></script>		
	<script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.colVis.min.js"></script>	

	<!-- Export Buttons -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/pdfmake.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/vfs_fonts.js"></script>
	<script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.html5.min.js"></script>
	
	<!-- Flot + Animation -->
	<script src="http://www.flotcharts.org/javascript/jquery.flot.min.js"></script>
	<script src="http://www.codicode.com/demo/flotanimator/jquery.flot.animator.min.js"></script>
	


	

    <style>
    /* Ensure that the demo table scrolls */
    th, td { white-space: nowrap; }
    div.dataTables_wrapper {
        width: 1600px;
        margin: 0 auto;
    }
 
    div.ColVis {
        float: left;
    }
    th, td {
        white-space: nowrap;
        padding-left: 30px !important;
        padding-right: 30px !important;
    }
    .text
	{
	    /*position:relative;
	    /*top:-230px;
	    left:30px;*/
	    text-align:center;
	    color:red;
	    font-weight:bold;
	}
	
	#topleft, #bottomright {
      border: solid 1px black;
    }
    
    #topleft {
        border-left-style: none;
        border-top-style: none;
    }
    
    #bottomright {
      border-right-style: none;
      border-bottom-style: none;
    }
    #flotTip {
	    padding: 3px 5px;
	    background-color: #000;
	    z-index: 100;
	    color: #fff;
	    opacity: .80;
	    filter: alpha(opacity=85);
	}
	</style>
  </head>

  <body>
  <nav class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">xheoTotals</a>
			</div>
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<li class="active"><a href="http://xheomar.github.io/totals">Home<span class="sr-only">(current)</span></a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Блоги на Sports.Ru<span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a target="_blank" href="https://www.sports.ru/tribuna/blogs/stanemstavitstavki/">В нашей лавке суперставки</a></li>
							<li><a target="_blank" href="https://www.sports.ru/tribuna/blogs/sportandcash/">Записки Дикого Попана</a></li>
							<li><a target="_blank" href="https://www.sports.ru/tribuna/blogs/zapiskipresledovatelya/">Системный футбол</a></li>
							<li role="separator" class="divider"></li>
							<!--li><a href="#">Предлагайте свои варианты</a></li-->
						</ul>
					</li>
					<li><a target="_blank" href="https://ru.surebet.com/calculator">Онлайн калькулятор вилок</a></li>
					<li><a target="_blank" href="http://alexbetting.com/system/">Расчет системы</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Probabili Formazioni<span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a target="_blank" href="http://www.fantagazzetta.com/probabili-formazioni-serie-a">FantaGazzetta</a></li>
							<li><a target="_blank" href="http://www.corrieredellosport.it/calcio/serie-a/probabili-formazioni/">CorriereDelloSport</a></li>
							<li><a target="_blank" href="http://www.fantaformazione.com/fantacalcio.calendari/probabili/Home.htm">FantaFormazione</a></li>
							<li role="separator" class="divider"></li>
							<!--li><a href="#">Предлагайте свои варианты</a></li-->
						</ul>
					</li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Twitter<span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a target="_blank" href="https://twitter.com/TheCalcioGuy">Matteo Bonetti</a></li>
							<li><a target="_blank" href="https://twitter.com/YuriiShevchenko">Юрий Шевченко</a></li>
							<li><a target="_blank" href="https://twitter.com/alessiologinov">Алессио Логинов</a></li>
							<li><a target="_blank" href="https://twitter.com/ANobelito">Нобель Арустамян</a></li>
							<li><a target="_blank" href="https://twitter.com/shhhnyak">Дмитрий Шнякин</a></li>
							<li role="separator" class="divider"></li>
							<!--li><a href="#">Предлагайте свои варианты</a></li-->
						</ul>
					</li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a target="_blank" href="http://tvplayer.pw/#">IPTV</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Программа передач<span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a target="_blank" href="http://guidatv.sky.it/guidatv/grid.html?category=sport&day=0">Sky It</a></li>
							<li><a target="_blank" href="https://ntvplus.ru/tv/?genre=3495">НТВ Плюс</a></li>
							<li role="separator" class="divider"></li>
							<!--li><a href="#">Предлагайте свои варианты</a></li-->
						</ul>
					</li>
				</ul>
			</div><!-- /.navbar-collapse -->
		</div><!-- /.container-fluid -->
	  </nav>  	
	  <table id="example" class="stripe row-border order-column" cellspacing="1" width="80%">
		<!--table id="example" class="table table-striped table-bordered" cellspacing="1" width="80%"-->				
			<thead>
	            <tr>
	                <th rowspan="2">Лига</th>
	                <th colspan="2">Игры</th>
	                <th rowspan="2">AVG</th>
	                <th colspan="3">Исходы</th>
	                <th colspan="1">ТМ</th>
	                <th colspan="4">ТБ</th>
	                <th colspan="3">Другие счета</th>
	                <th colspan="6">П1, точный счет</th>
	                <th colspan="4">Н, точный счет</th>
	                <th colspan="6">П2, точный счет</th>
	                <th colspan="6">Количество голов</th>
	                <th colspan="6">В итоговом счете есть цифра</th>
	                <th colspan="3">Тотал 1 тайма</th>
	                <th colspan="3">Тотал 2 тайма</th>
	                <th colspan="4">Голы в таймах</th>
	                <th colspan="9">Тайм/Матч</th>
	                <th rowspan="2">Н+ТБ2.5</th>
	                <th rowspan="2">ОБЗ</th>
	                <th rowspan="2">ОБЗ+ТБ2.5</th>
	                <th rowspan="2">ОБЗ+ТБ3.5</th>
	                <th rowspan="2">ОБЗН+ТБ2.5</th>
	                <th rowspan="2">ОБЗ ИТБ1.5</th>
	                <th rowspan="2">ID лиги</th>

	            </tr>
	            <tr>
	                <th>GP</th>
	                <th>GP %</th>

	                <th>П1</th>
	                <th>Н</th>
	                <th>П2</th>

	                <th>ТМ1.5</th>

	                <th>ТБ2.5</th>
	                <th>ТБ3.5</th>
	                <th>ТБ4.5</th>
	                <th>ТБ5.5</th>

	                <th>~ЛДС</th>
	                <th>ЛДС</th>
	                <th>4:0 0:4</th>

	                <th>1:0</th>
	                <th>2:0</th>
	                <th>2:1</th>
	                <th>3:0</th>
	                <th>3:1</th>
	                <th>3:2</th>

	                <th>0:0</th>
	                <th>1:1</th>
	                <th>2:2</th>
	                <th>3:3</th>

	                <th>0:1</th>
	                <th>0:2</th>
	                <th>1:2</th>
	                <th>0:3</th>
	                <th>1:3</th>
	                <th>2:3</th>

	                <th>1</th>
	                <th>2</th>
	                <th>3</th>
	                <th>4</th>
	                <th>5</th>
	                <th>6 и более</th>

	                <th>"0"</th>
	                <th>"1"</th>
	                <th>"2"</th>
	                <th>"3"</th>
	                <th>"4"</th>
	                <th>"5"</th>

	                <th>ТМ0.5</th>
	                <th>1 гол</th>
	                <th>ТБ1.5</th>

	                <th>ТМ0.5</th>
	                <th>1 гол</th>
	                <th>ТБ1.5</th>

	                <th>1>2</th>
	                <th>1=2</th>
	                <th>1<2</th>
	                <th>ОБЗ в каждом</th>

	                <th>П1/П1</th>
	                <th>П1/П2</th>
	                <th>П1/Н</th>
	                <th>П2/П1</th>
	                <th>П2/П2</th>
	                <th>П2/Н</th>
	                <th>Н/П1</th>
	                <th>Н/П2</th>
	                <th>Н/Н</th>

	            </tr>
	        </thead>			
    </table>

	<div class="chart_div" style="margin: 0 auto;">
	    <table cellpadding="0">
	     <tr>
	      <!-- <td id="topleft"> -->
	      <td>	
	       <p class="chart1" style="text-align:center;color:red;font-weight:bold;">ТБ2.5</p>
	       <div id="chart1" style="width:550px;height:200px;padding:5px;margin:auto;"></div>
	      </td>
	      <td>
	        <p class="chart2" style="text-align:center;color:red;font-weight:bold;">ТБ3.5</p>
	       <div id="chart2" style="width:550px;height:200px;padding:5px;margin:auto;"></div>
	      </td>
	      <td>
	       <p class="chart3" style="text-align:center;color:red;font-weight:bold;">ТБ4.5</p>
	       <div id="chart3" style="width:550px;height:200px;padding:5px;margin:auto;"></div>
	      </td>
	     </tr>
	     <tr>
	      <td>
	       <p class="chart4" style="text-align:center;color:red;font-weight:bold;">Почти ЛДС</p>
	       <div id="chart4" style="width:550px;height:200px;padding:5px;margin:auto;"></div>
	      </td>
	      <td>
	        <p class="chart5" style="text-align:center;color:red;font-weight:bold;">ЛДС</p>
	       <div id="chart5" style="width:550px;height:200px;padding:5px;margin:auto;"></div>
	      </td>
	      <td>
	      <!-- <td id="bottomright"> -->
	        <p class="chart6" style="text-align:center;color:red;font-weight:bold;">0:0</p>
	       <div id="chart6" style="width:550px;height:200px;padding:5px;margin:auto;"></div>
	      </td>
	     </tr>
	    </tbody>
	   </table>
	</div>
	

    <!-- <div id="dv">
        <span id="txt"></span>
    </div> -->

    

		<script> 
			$(document).ready(function() {
			    var table = $('#example').DataTable( {
			        "data": data_football,
			        "order": [[ 3, "desc" ]],			        
			        "paging":   true,
			        "ordering": true,
			        "info":     true,
        			"scrollX": true,
        			"scrollY": "300px",
        			"scrollCollapse": true,
        			// "buttons":        [ 'colvis' ],			        
        			"stateSave": false,
        			"columnDefs": [ 
	        			{
	        				"targets": [ -1 ],
				            "visible": false				            
				        },
				        {
				        	"targets": [ 0 ],
				        	/*"render": function ( data, type, row ) 
				        	{
			                    return data +' ('+ row[3]+')';
			                },*/
				        }
			        ],
			        "lengthMenu": [[15, 30, 50, -1], [15, 30, 50, "All"]],
			        "fixedColumns":   {
			            "leftColumns": 3
			        },
			        "select": true,
			        dom: 'Bfrtip',
			        buttons: [
			            {
			                extend: 'colvisGroup',
			                text: 'Исходы',
			                //show: [ 5, 6, 7 ],
			                hide: [ 4, 5, 6 ]
			            },
			            {
			                extend: 'colvisGroup',
			                text: 'Тоталы',
			                //show: [ 3, 4, 5 ],
			                hide: [ 7, 8, 9, 10, 11 ]
			            },
			            {
			                extend: 'colvisGroup',
			                text: 'ЛДСы',
			                //show: [ 3, 4, 5 ],
			                hide: [ 12, 13, 14 ]
			            },
			            {
			                extend: 'colvisGroup',
			                text: 'Счета',
			                //show: [ 3, 4, 5 ],
			                hide: [ 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30 ]
			            },			            
			            {
			                extend: 'colvisGroup',
			                text: 'Количество голов',
			                //show: [ 3, 4, 5 ],
			                hide: [ 31, 32, 33, 34, 35, 36 ]
			            },
			            {
			                extend: 'colvisGroup',
			                text: 'Цифры',
			                //show: [ 3, 4, 5 ],
			                hide: [ 37, 38, 39, 40, 41, 42 ]
			            },
			            {
			                extend: 'colvisGroup',
			                text: 'Тоталы таймов',
			                //show: [ 3, 4, 5 ],
			                hide: [ 43, 44, 45, 46, 47, 48, 49, 50, 51, 52 ]
			            },
			            {
			                extend: 'colvisGroup',
			                text: 'Тайм/Матч',
			                //show: [ 3, 4, 5 ],
			                hide: [ 53, 54, 55, 56, 57, 58, 59, 60, 61 ]
			            },
			            {
			                extend: 'colvisGroup',
			                text: 'Показать все',
			                show: ':hidden'
			            },
			            //'copyHtml5',
			            //'excelHtml5',
			            {
			            	text: 'Экспорт в Excel',
			                extend: 'excelHtml5',
			                exportOptions: {
			                    columns: ':visible'
			                }
			            }
			            //'csvHtml5',
			            //'pdfHtml5'
			        ]
			    } );
			} );
		</script>
		<script>
			$(document).ready(function() {
			    var table = $('#example').DataTable();
			     
			    $('#example tbody').on('click', 'tr', function () {
			    	restoreLabelsForCharts();
			        var data = table.row( this ).data();
			        //alert( 'You clicked on '+data[68]+'\'s row' );
					
					printChart(window["games_" + data[68]],
							window["trend_tb25_" + data[68]], 
							window["animation_tb25_" + data[68]], 
							"ТБ2.5 " + data[0] + ": " +  data[8],  
							"chart1");
					printChart(window["games_" + data[68]],
							window["trend_tb35_" + data[68]], 
							window["animation_tb35_" + data[68]], 
							"ТБ3.5 " + data[0] + ": " +  data[9],  
							"chart2");
					printChart(window["games_" + data[68]],
							window["trend_tb45_" + data[68]], 
							window["animation_tb45_" + data[68]], 
							"ТБ4.5 " + data[0] + ": " +  data[10],  
							"chart3");


					printChart(window["games_" + data[68]],
							window["trend_preLds_" + data[68]], 
							window["animation_preLds_" + data[68]], 
							"Почти ЛДС " + data[0] + ": " +  data[12],  
							"chart4");
					printChart(window["games_" + data[68]],
							window["trend_lds_" + data[68]], 
							window["animation_lds_" + data[68]], 
							"ЛДС " + data[0] + ": " +  data[13], 
							"chart5");										
					printChart(window["games_" + data[68]],
							window["trend_nullNull_" + data[68]], 
							window["animation_nullNull_" + data[68]], 
							"0:0 " + data[0] + ": " +  data[21],  
							"chart6");

			    } );
			} );
		</script>

		<script type="text/javascript">
			function restoreLabelsForCharts()
			{
				$(".chart1").html("ТБ2.5");
				$(".chart2").html("ТБ3.5");
				$(".chart3").html("ТБ4.5");

				$(".chart4").html("Почти ЛДС");
				$(".chart5").html("ЛДС");
				$(".chart6").html("0:0");
			}
		</script>
	
		<script type="text/javascript">
			function printChart(games_array, data_array, animation_array, leagueInfo, div_chart_id) 
			{
				var plot = $.plotAnimator($("#" + div_chart_id), 
						[{
							data : games_array, 
							color: "#F5F6CE",							
							bars: { 
								show: true, 
								fill: 0.5,
								//barWidth: 0.8,
        						align: "center",
        						horizontal: false
							}
						},
						{
							data : data_array, 
							color: "#DF3A01",
							bars: { 
								show: true, 
								fill: true,
								//barWidth: 0.8,
        						align: "center",
        						horizontal: false
							}
						},						
						{
							data : animation_array, 
							lines: {
								lineWidth:4
							}, 
							color: "#58D3F7",
							animator: {
								start:100, 
								steps:99, 
								duration:1000, 
								direction:"right"
							}
						}],
						{
							grid: { 
								backgroundColor: { 
									colors: [ "#fff", "#eee" ] 
								}
							}
						}
					);

					$("#" + div_chart_id).on("animatorComplete", function() {
					    $("." + div_chart_id).html(leagueInfo);
					});
			}
		</script>

	</body>
</html>

